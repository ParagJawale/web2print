<?xml version="1.0" encoding="UTF-8"?>
<!--+
    | Main import file for the module test.
    |
    | Date:    $LastChangedDate: 2012-02-22 11:49:00 +0100 (Mi, 22 Feb 2012) $
    | Version: $LastChangedRevision: 12142 $
    +-->

<import revision="$LastChangedRevision: 12142 $" xmlns:xi="http://www.w3.org/2001/XInclude">
<objectdefs>

	<web2print module_alias="wp" use_prefix="true">

        <abstract_content tbl="acnt" copy_from="core.template_normal_transaction" is_abstract="true">
            <print_template>
                <sort_id>2000</sort_id>
                <category>main.basic</category>
                <data_source>relation</data_source>
                <related_objectdef>web2print.print_template</related_objectdef>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Template</en-US>
                </name>
                <name>
                    <de-DE>Vorlage</de-DE>
                </name>
                <name>
                    <bg-BG>Шаблон</bg-BG>
                </name>
            </print_template>
						<dest_page col="dpage">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>integer</data_type>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Page</en-US>
                </name>
                <name>
                    <de-DE>Seite</de-DE>
                </name>
                <name>
                    <bg-BG>Страница</bg-BG>
                </name>
								<default_value>1</default_value>
								<min_value_integer>1</min_value_integer>
								<is_not_insert_default_value>true</is_not_insert_default_value>
            </dest_page>

        </abstract_content>

        <varchar_content parent_objectdef="web2print.abstract_content">
            <initial_value col="ival_vc">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>varchar</data_type>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Initial value</en-US>
                </name>
                <name>
                    <de-DE>Anfangswert</de-DE>
                </name>
                <name>
                    <bg-BG>Начална стойност</bg-BG>
                </name>
            </initial_value>
        </varchar_content>

        <text_content parent_objectdef="web2print.abstract_content">
            <initial_value col="ival_vt">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>text</data_type>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Initial value</en-US>
                </name>
                <name>
                    <de-DE>Anfangswert</de-DE>
                </name>
                <name>
                    <bg-BG>Начална стойност</bg-BG>
                </name>
            </initial_value>
        </text_content>

        <date_content parent_objectdef="web2print.abstract_content">
            <initial_value col="ival_vd">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>datetime</data_type>
                <output_format>default_output_format_date</output_format>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Initial value</en-US>
                </name>
                <name>
                    <de-DE>Anfangswert</de-DE>
                </name>
                <name>
                    <bg-BG>Начална стойност</bg-BG>
                </name>
            </initial_value>
        </date_content>

        <datetime_content parent_objectdef="web2print.abstract_content">
            <initial_value col="ival_vd">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>datetime</data_type>
                <output_format>default_output_format_datetime</output_format>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Initial value</en-US>
                </name>
                <name>
                    <de-DE>Anfangswert</de-DE>
                </name>
                <name>
                    <bg-BG>Начална стойност</bg-BG>
                </name>
            </initial_value>
        </datetime_content>

        <time_content parent_objectdef="web2print.abstract_content">
            <initial_value col="ival_vd">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>datetime</data_type>
                <output_format>default_output_format_time</output_format>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Initial value</en-US>
                </name>
                <name>
                    <de-DE>Anfangswert</de-DE>
                </name>
                <name>
                    <bg-BG>Начална стойност</bg-BG>
                </name>
            </initial_value>
        </time_content>

        <image_content parent_objectdef="web2print.abstract_content">
            <initial_value col="ival_vi">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>relation</data_source>
                <related_objectdef>documents.document</related_objectdef>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Initial value</en-US>
                </name>
                <name>
                    <de-DE>Anfangswert</de-DE>
                </name>
                <name>
                    <bg-BG>Начална стойност</bg-BG>
                </name>
            </initial_value>
        </image_content>

        <qrcode_content parent_objectdef="web2print.abstract_content">
            <initial_value col="ival_vc">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>varchar</data_type>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Initial value</en-US>
                </name>
                <name>
                    <de-DE>Anfangswert</de-DE>
                </name>
                <name>
                    <bg-BG>Начална стойност</bg-BG>
                </name>
            </initial_value>
        </qrcode_content>

        <indexed_color_content parent_objectdef="web2print.abstract_content">

            <initial_value col="ival_vc">
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>varchar</data_type>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Initial color (CMYK)</en-US>
                </name>
                <name>
                    <de-DE>Anfangswert (CMYK)</de-DE>
                </name>
                <name>
                    <bg-BG>Начална стойност (CMYK)</bg-BG>
                </name>
            </initial_value>

            <available_colors>
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>varchar</data_type>
                <is_inmaintbl>false</is_inmaintbl>
                <is_multiple>true</is_multiple>
                <name>
                    <en-US>Available colors (CMYK)</en-US>
                </name>
                <name>
                    <de-DE>Vorhandene Farben (CMYK)</de-DE>
                </name>
                <name>
                    <bg-BG>Налични цветове (CMYK)</bg-BG>
                </name>
                <value_table>$(DB_PREFIX)_wp_var_avlcl</value_table>
            </available_colors>

        </indexed_color_content>


        <print_tag tbl="prnt_tag" copy_from="core.template_normal_transaction">
             <category>
                <sort_id>2000</sort_id>
                <category>main.basic</category>
                <data_source>relation</data_source>
                <related_objectdef>web2print.tag_category</related_objectdef>
                <is_inmaintbl>true</is_inmaintbl>
                <name>
                    <en-US>Category</en-US>
                </name>
                <name>
                    <de-DE>Kategorie</de-DE>
                </name>
                <name>
                    <bg-BG>Категория</bg-BG>
                </name>
            </category>
            <templates>
                <sort_id>4000</sort_id>
                <category>main.settings</category>
                <data_source>relation</data_source>
                <related_objectdef>web2print.print_template</related_objectdef>
                <is_multiple>true</is_multiple>
                <value_table>$(DB_PREFIX)_wp_rel_tmplts</value_table>
                <name>
                    <en-US>Templates</en-US>
                </name>
                <name>
                    <de-DE>Vorlagen</de-DE>
                </name>
                <name>
                    <bg-BG>Шаблони</bg-BG>
                </name>
            </templates>

		</print_tag>

		<print_template tbl="prnt_tmpl" copy_from="core.template_normal_transaction">
            <category mode="delete"/>
            <width_mm>
                <sort_id>3000</sort_id>
                <category>main.settings</category>
                <data_source>input</data_source>
                <data_type>double</data_type>
                <is_readonly>true</is_readonly>
                <name>
                    <en-US>Width (mm)</en-US>
                </name>
                <name>
                    <de-DE>Breite (mm)</de-DE>
                </name>
                <name>
                    <bg-BG>Широчина (mm)</bg-BG>
                </name>
            </width_mm>

            <height_mm>
                <sort_id>3001</sort_id>
                <category>main.settings</category>
                <data_source>input</data_source>
                <data_type>double</data_type>
                <is_readonly>true</is_readonly>
                <name>
                    <en-US>Height (mm)</en-US>
                </name>
                <name>
                    <de-DE>Höhe (mm)</de-DE>
                </name>
                <name>
                    <bg-BG>Височина (mm)</bg-BG>
                </name>
            </height_mm>


            <document>
                <sort_id>2001</sort_id>
                <category>main.basic</category>
                <data_source>relation</data_source>
                <related_objectdef>documents.document</related_objectdef>
                <is_inmaintbl>true</is_inmaintbl>
                <is_obligatory>true</is_obligatory>
                <name>
                    <en-US>Template (Document)</en-US>
                </name>
                <name>
                    <de-DE>Vorlage (Dokument)</de-DE>
                </name>
                <name>
                    <bg-BG>Шаблон (Документ)</bg-BG>
                </name>
                <on_update_value>
                    <!-- JAVASCRIPT -->
                    <object code="web2print.print_template.contents:on_change" module="core" objectdef="jscript"/>
                </on_update_value>
                <on_insert_value>
                    <object code="web2print.print_template.contents:on_change" module="core" objectdef="jscript"/>
                </on_insert_value>
                <on_delete_value>
                    <object code="web2print.print_template.contents:on_change" module="core" objectdef="jscript"/>
                </on_delete_value>
                <on_update_related>
                    <object code="web2print.print_template.contents:on_change" module="core" objectdef="jscript"/>
                </on_update_related>
            </document>

            <contents>
                <sort_id>3000</sort_id>
                <category>main.basic</category>
                <data_source>relation</data_source>
                <relation_parent>web2print.abstract_content.print_template</relation_parent>
                <display_type>property.relation.multiple.add.new</display_type>
                <relation_filter>core_property_default_relation_filter_simple_bidirectional_relation</relation_filter>
                <name>
                    <en-US>Contents</en-US>
                </name>
                <name>
                    <de-DE>Inhalte</de-DE>
                </name>
                <name>
                    <bg-BG>Съдържания</bg-BG>
                </name>
                <on_update_value>
                    <!-- JAVASCRIPT -->
                    <object code="web2print.print_template.contents:on_change" module="core" objectdef="jscript">
                        <script_code>
                            <value><![CDATA[
if (!this.document) {
    if (this.preview_key)
        this.preview_key=null;
    if (this.preview_document)
        this.preview_document=null;
    return;
}
require("src/srv/renderer").checkPreview(this);
                        ]]></value>
                        </script_code>
                    </object>
                </on_update_value>
                <on_insert_value>
                        <object code="web2print.print_template.contents:on_change" module="core" objectdef="jscript"/>
                </on_insert_value>
                <on_delete_value>
                        <object code="web2print.print_template.contents:on_change" module="core" objectdef="jscript"/>
                </on_delete_value>
                <on_update_related>
                        <object code="web2print.print_template.contents:on_change" module="core" objectdef="jscript"/>
                </on_update_related>
            </contents>

            <preview_document>
                <sort_id>2301</sort_id>
                <category>main.basic</category>
                <data_source>relation</data_source>
                <related_objectdef>documents.document</related_objectdef>
                <is_inmaintbl>true</is_inmaintbl>
                <is_readonly>true</is_readonly>
                <is_hidden>false</is_hidden>
                <name>
                    <en-US>Preview (Document)</en-US>
                </name>
                <name>
                    <de-DE>Vorschau (Dokument)</de-DE>
                </name>
                <name>
                    <bg-BG>Преглед (Документ)</bg-BG>
                </name>
            </preview_document>

            <preview_key>
                <sort_id>2302</sort_id>
                <category>main.basic</category>
                <data_source>input</data_source>
                <data_type>text</data_type>
                <is_inmaintbl>true</is_inmaintbl>
                <is_readonly>true</is_readonly>
                <is_hidden>false</is_hidden>
                <name>
                    <en-US>Preview (Key)</en-US>
                </name>
                <name>
                    <de-DE>Vorschau (Schlüßel)</de-DE>
                </name>
                <name>
                    <bg-BG>Преглед (Ключ)</bg-BG>
                </name>
            </preview_key>

            <tags>
                <sort_id>4000</sort_id>
                <category>main.basic</category>
                <data_source>relation</data_source>
                <relation_parent>web2print.print_tag.templates</relation_parent>
                <relation_filter mode="delete"/>
                <name>
                    <en-US>Tags</en-US>
                </name>
                <name>
                    <de-DE>Tags</de-DE>
                </name>
                <name>
                    <bg-BG>Тагове</bg-BG>
                </name>
            </tags>

		</print_template>

        <print_category mode="delete"/>

        <tag_category tbl="prnt_tct" copy_from="core.template_normal_transaction">

            <tags>
                <sort_id>2000</sort_id>
                <category>main.basic</category>
                <data_source>relation</data_source>
                <relation_parent>web2print.print_tag.category</relation_parent>
                <display_type>property.relation.multiple.add.new</display_type>
                <relation_filter>core_property_default_relation_filter_simple_bidirectional_relation</relation_filter>
                <name>
                    <en-US>Templates</en-US>
                </name>
                <name>
                    <de-DE>Vorlagen</de-DE>
                </name>
                <name>
                    <bg-BG>Шаблони</bg-BG>
                </name>
            </tags>

            <!-- main.settings -->
            <parent>
                <category>main.settings</category>
                <sort_id>3001</sort_id>
                <is_inmaintbl>true</is_inmaintbl>
                <data_source>relation</data_source>
                <related_objectdef>web2print.tag_category</related_objectdef>
                <is_selfreference>true</is_selfreference>
                <name>
                    <en-US>Parent</en-US>
                </name>
                <name>
                    <de-DE>Gehört zu</de-DE>
                </name>
                <name>
                    <bg-BG>Съдържа се в</bg-BG>
                </name>
                <index_code>par</index_code>
                <is_selfreference>true</is_selfreference>
            </parent>

            <children>
                <category>main.settings</category>
                <sort_id>3002</sort_id>
                <data_source>relation</data_source>
                <relation_parent>web2print.tag_category.parent</relation_parent>
                <name>
                    <en-US>Children</en-US>
                </name>
                <name>
                    <de-DE>Enthält</de-DE>
                </name>
                <name>
                    <bg-BG>Съдържа</bg-BG>
                </name>
                <is_hidden>false</is_hidden>
                <display_type>property.relation.multiple.add.new</display_type>
                <relation_filter>core_property_default_relation_filter_simple_bidirectional_relation</relation_filter>
                <is_selfreference>true</is_selfreference>
            </children>
		</tag_category>

	</web2print>
</objectdefs>
</import>
